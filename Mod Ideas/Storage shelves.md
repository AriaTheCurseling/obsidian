A storage shelf is a barrel with a shelf on it

They are treated as a combined inventory, each line in the barrel matches a slot in the shelf. Right clicking fills the shelf, left clicking removes from it. 